#!/bin/bash
# Centralized Runtime Constants

# Use existing base directories
LAB_DIR="${LAB_DIR:-$HOME/lab}"    # Keep existing LAB_DIR if set

# auxillary directories
AUX_DIR="${AUX_DIR:-$HOME/.local/lab}" # Keep existing AUX_DIR if set
LOG_DIR="${LOG_DIR:-$HOME/.local/lab/log}" # Keep existing LOG_DIR if set
TMP_DIR="${TMP_DIR:-$HOME/.local/lab/tmp}" # Keep existing TMP_DIR if set

# Module-specific directories (using existing patterns)
ERR_LOG_DIR="$LOG_DIR/err"
ERR_TMP_DIR="$TMP_DIR/err"
LOG_LO_DIR="$LOG_DIR/log"  
TMP_LO_DIR="$TMP_DIR/log"
LOG_TME_DIR="$LOG_DIR/tme"
TMP_TME_DIR="$TMP_DIR/tme"

# State and log files (using existing patterns)
ERROR_LOG="$ERR_LOG_DIR/error.log"
ERROR_COUNT_FILE="$ERR_TMP_DIR/error_count"
ERROR_STATE_FILE="$ERR_TMP_DIR/error_state"
LOG_STATE_FILE="$TMP_LO_DIR/lo1_state"
LOG_DEBUG_FILE="$LOG_LO_DIR/debug.log"
TME_STATE_FILE="$TMP_TME_DIR/tme_state"
TME_LOG_FILE="$LOG_TME_DIR/timing.log"

# Keep existing error codes pattern
declare -gA ERROR_CODES=(
    [SUCCESS]=0
    [GENERAL_ERROR]=1
    [FILE_NOT_FOUND]=2
    [PERMISSION_DENIED]=3
    [FUNCTION_NOT_FOUND]=4
    [EXECUTION_FAILED]=5
    [SOURCE_ERROR]=6
    [DEPENDENCY_ERROR]=7
    [CONFIG_ERROR]=8
    [OPTIONAL_WARNING]=100
)

# Runtime configuration
CACHE_CLEANUP_INTERVAL=300  # 5 minutes
GENERATION_FOLDERS=(env fun gen)  # Keep existing array name

# Export all constants
export LAB_DIR LOG_DIR TMP_DIR
export ERR_LOG_DIR ERR_TMP_DIR
export LOG_LO_DIR TMP_LO_DIR
export LOG_TME_DIR TMP_TME_DIR
export ERROR_LOG ERROR_COUNT_FILE ERROR_STATE_FILE
export LOG_STATE_FILE LOG_DEBUG_FILE
export TME_STATE_FILE TME_LOG_FILE
export CACHE_CLEANUP_INTERVAL
export GENERATION_FOLDERS
export -A ERROR_CODES