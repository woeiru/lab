#!/bin/bash

# Color codes (matching the log function colors)
RED='\033[0;31m'
ORANGE='\033[0;33m'
YELLOW='\033[1;33m'
GREEN='\033[0;32m'
CYAN='\033[0;36m'
BLUE='\033[0;34m'
INDIGO='\033[0;35m'
VIOLET='\033[1;35m'
WHITE='\033[1;37m'
NC='\033[0m' # No Color

# Interactive read function with levels
ire() {
    local level=$1
    local prompt=$2
    local level_num=${level#lvl-}
    local indent=""
    local color=""

    # Set color based on level (matching log function)
    case $level in
        "lvl-1") color=$RED ;;
        "lvl-2") color=$ORANGE ;;
        "lvl-3") color=$YELLOW ;;
        "lvl-4") color=$GREEN ;;
        "lvl-5") color=$CYAN ;;
        "lvl-6") color=$BLUE ;;
        "lvl-7") color=$INDIGO ;;
        "lvl-8") color=$VIOLET ;;
        "lvl-9") color=$WHITE ;;
        *) color=$NC ;;
    esac

    # Create indentation matching log function
    if [ $level_num -eq 1 ]; then
        indent="    "
    elif [ $level_num -eq 9 ]; then
        indent="                  "
    else
        indent="      "
        for ((i=3; i<=$level_num; i++)); do
            indent="  $indent"
        done
    fi

    # Print prompt with proper indentation and color
    printf "%s%s%s%s" "$indent" "$color" "$prompt" "$NC"

    # Read the input
    IFS= read -r response

    # Echo the response back
    echo "$response"
}

# Export the function so it can be used by other scripts
export -f ire
