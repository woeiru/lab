# Define the directory of the script
DIR="$( cd "$( dirname "$(readlink -f "${BASH_SOURCE[0]}")" )" >/dev/null 2>&1 && pwd )"

# alias contruction
#
# Common directories
CON_DIR="$DIR/../con"
DOT_DIR="$DIR/../dot"
LIB_DIR="$DIR/../lib"
SET_DIR="$DIR/../set"
VAR_DIR="$DIR/../var"

# Source necessary scripts
source "$LIB_DIR/all.bash"
source "$LIB_DIR/osm.bash"
source "$LIB_DIR/pve.bash"
source "$LIB_DIR/pbs.bash"
source "$LIB_DIR/shr.bash"

# Define arrays for constructing aliases
#
files=(all osm pbs pve shr)
bash_files=(all osm pbs pve shr)

# Generate bash execution aliases
for file in "${bash_files[@]}"; do
  alias "b.$file.sh"="bash $SET_DIR/$file.sh"
done

# Generate cat aliases
for file in "${files[@]}"; do
  alias "c.$file.bash"="cat $LIB_DIR/$file.bash"
  alias "c.$file.sh"="cat $SET_DIR/$file.sh"
  alias "c.$file.conf"="cat $VAR_DIR/$file.conf"
done

# Generate vim aliases
for file in "${files[@]}"; do
  alias "v.$file.bash"="vim $LIB_DIR/$file.bash"
  alias "v.$file.sh"="vim $SET_DIR/$file.sh"
  alias "v.$file.conf"="vim $VAR_DIR/$file.conf"
done

# Generate readme.md aliases for all folders containing a readme.md in the entire repo
while IFS= read -r -d '' readme; do
  dir=$(dirname "$readme")
  alias_name=$(basename "$dir").md
  alias "$alias_name"="cat $readme"
done < <(find "$DIR/.." -type f -name "readme.md" -print0)

# alias hardcoding
#
# bash
alias b='bash'

# cat
alias c='cat'
alias c.b="cat $DOT_DIR/bashrc"

# exit
alias ee='exit'

# functions
alias gg='all-gio'

# git
alias g='git status'
alias gd='git diff'
alias gl='git ls-files | xargs cat | wc -l'
alias ga='git add .'
alias gc='git commit -m "standard"'
alias go='git push origin master'
alias gp='git pull'

# vim
alias v='vim'
alias v.b="vim $DOT_DIR/bashrc"
alias v.nw="vim $CON_DIR/node-w.md"

# directory selection
alias d='cd'
alias ..='cd ..'
alias dl="cd $DIR/.."
alias dlc="cd $CON_DIR"

alias d.samba='cd /etc/samba/'
alias d.snapper='cd /etc/snapper/configs'
alias d.pam='cd /usr/lib/pam_snapper'
alias d.def='cd /etc/default'

# btrfs management
alias bt='btrfs'
alias btf='btrfs filesystem'

# system configuration
alias v.smb.conf='vim /etc/samba/smb.conf'
alias v.smbusers='vim /etc/samba/smbusers'
alias v.firewall.conf='vim /etc/firewalld/firewalld.conf'
alias v.fstab='vim /etc/fstab'

# System control aliases
alias s='sudo'
alias y='systemctl'

# Utility aliases
alias ee='exit'
alias eb='exec bash'
alias h='history'

# Disk usage aliases
alias u='du -bh -d1'
alias uu='du -bh -d2'
alias uuu='du -bh -d3'

# Tree view aliases
alias t='tree'
alias tt='tree -L 2'
alias ttt='tree -L 3'
alias tttt='tree -L 4'
alias ttttt='tree -L 5'

# Transactional update alias
alias tu='transactional-update'
alias tua='transactional-update apply'
alias tur='transactional-update reboot'

# snapper
alias sl='snapper list'
alias slh='osm-slc home'

# pam_snapper
alias pam.convert='bash /usr/lib/pam_snapper/pam_snapper_homeconvert.sh'
alias pam.config='bash /usr/lib/pam_snapper/pam_snapper_pamconfig.sh'
alias pam.useradd='bash /usr/lib/pam_snapper/pam_snapper_useradd.sh'
alias pam.userdel='bash /usr/lib/pam_snapper/pam_snapper_userdel.sh'

# Sysstat
alias sar='sar -d 1'
alias ios='iostat -x 1'

# SELinux
alias ses='sestatus -v'
alias seb='sudo semanage boolean -l'

# Podman
alias p='podman'
alias ps='podman ps'
alias psa='podman ps -a'

# Misc
alias berlintime="sudo timedatectl set-timezone Europe/Berlin"
